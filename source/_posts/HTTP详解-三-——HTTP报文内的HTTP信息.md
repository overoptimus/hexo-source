---
title: HTTP详解(三)——HTTP报文内的HTTP信息
date: 2020-03-09 22:01:09
id: 20200309220109
tags: 
	- HTTP
	- 网络基础
categories: 网络安全
---

HTTP通信过程包括从客户端发往服务器端的请求及从服务器端返回客户端的响应。

# HTTP报文

用于HTTP协议交互的信息被称为HTTP报文。请求端（客户端）的HTTP报文叫做请求报文，响应端（服务器端）的叫做响应报文。

HTTP报文本身是由多行（用CR+LF作换行符）数据构成的字符串文本。

HTTP报文大致可分为报文首部和报文主体两块。两者由最初出现的空行（CR+LF）来划分。通常，并不一定要有报文主体。

![](https://superj.oss-cn-beijing.aliyuncs.com/20200309220251.png)

# 请求报文及响应报文的结构

![](https://superj.oss-cn-beijing.aliyuncs.com/20200309220337.png)

# 编码提升传输速率

HTTP在传输数据时可以按照数据原貌直接传输，但也可以在传输过程中通过编码提升传输速率。通过在传输时编码，能有效地处理大量的访问请求。但是，编码的操作需要计算机来完成，因此会消耗更多的CPU资源。

## 报文主体和实体主体的差异

- 报文（message）

  是HTTP通信中的基本单位，由8位组字节流（octet sequence，其中octet为8个比特）组成，通过HTTP通信传输。

- 实体（entity）

  作为请求或响应的有效载荷数据（补充项）被传输，其内容由实体首部和实体主体组成。

HTTP报文的主体用于传输请求或响应的实体主体。

通常，报文主体等于实体主体。只有当传输中进行编码操作时，实体主体的内容发生变化，猜到是它和报文主体产生差异。

我们可以理解为实体是想要传输的信息，实体通过报文的形式来进行传输。

# 获取部分内容的范围请求

下载中间暂停后，继续下载不用重新开始的问题，叫做范围请求（Range Request）。

针对范围请求，响应会返回状态码为206 Partial Content的响应报文。另外，对于多重范围的范围请求，响应会在首部字段Content-Type标明multipart/byteranges后返回响应报文。

如果服务器端无法响应范围请求，则会返回状态码200 OK和完整的实体内容。

# 内容协商返回最合适的内容

当浏览器的默认语言为英语或中文，访问相同URI的Web页面时，则会显示对应的英语版或中文版的Web页面。这样的机制称为内容协商（Content Negotiation）。

 